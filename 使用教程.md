# Shiori 博客系统 - 完整使用教程

## 目录

1. [快速开始](#快速开始)
2. [创建新文章](#创建新文章)
3. [编写文章](#编写文章)
4. [本地预览](#本地预览)
5. [构建发布](#构建发布)
6. [部署到 GitHub Pages](#部署到-github-pages)
7. [个性化配置](#个性化配置)
8. [常见问题](#常见问题)

---

## 快速开始

### 第一步：确认环境

确保你已经安装了 Node.js（建议 v18 或更高版本）：

```bash
node --version
npm --version
```

### 第二步：安装依赖

在博客目录下运行：

```bash
npm install
```

### 第三步：首次构建

```bash
npm run build
```

构建完成后，会在 `dist/` 目录生成静态文件。

---

## 创建新文章

### 方法一：使用命令创建（推荐）

在博客目录运行：

```bash
node cli.js new "我的第一篇文章"
```

这会在 `source/_posts/` 目录创建一个新的 Markdown 文件，文件名格式为：
```
2025-12-26-my-first-post.md
```

### 方法二：手动创建

1. 打开 `source/_posts/` 目录
2. 创建一个新的 `.md` 文件
3. 按照下面的格式编写文章

---

## 编写文章

### 文章格式

每篇文章都需要包含 YAML 头信息（Front Matter）：

```markdown
---
title: 文章标题
date: 2025-12-26 14:30
categories:
  - 技术分享
  - 教程
tags:
  - javascript
  - nodejs
  - 前端开发
---

# 文章标题

这里是文章的简介，会显示在首页列表中。

<!-- more -->

这里是正文内容，只有在点击进入文章页面后才会显示。

## 二级标题

### 三级标题

普通段落文字...

**粗体文字**
*斜体文字*

### 代码块

\`\`\`javascript
function hello() {
  console.log("Hello, Shiori!");
}
\`\`\`

### 列表

- 项目一
- 项目二
- 项目三

### 引用

> 这是一段引用文字

### 链接

[Shiori GitHub](https://github.com)
```

### 重要元素说明

#### 1. YAML 头信息

```yaml
---
title: 文章标题              # 必填：文章标题
date: 2025-12-26 14:30      # 必填：发布日期
categories:                 # 可选：分类
  - 技术分享
tags:                       # 可选：标签
  - javascript
  - nodejs
---
```

#### 2. 阅读更多分割线

使用 `<!-- more -->` 标记：
- **分割线之前**的内容会显示在首页
- **分割线之后**的内容只在文章详情页显示

#### 3. 分类和标签

- **分类**：层级组织，适合大的主题分类
- **标签**：扁平组织，适合关键词标记

---

## 本地预览

### 启动预览服务器

```bash
npm run preview
```

然后在浏览器打开：`http://localhost:4000`

### 开发模式（支持热重载）

```bash
npm run serve
```

这个模式会：
1. 启动预览服务器
2. 监控文件变化
3. 自动重新构建

当你修改文章或配置后，浏览器会自动刷新。

---

## 构建发布

### 构建博客

```bash
npm run build
```

构建过程：
1. 清理 `dist/` 目录
2. 解析所有 Markdown 文章
3. 生成 HTML 页面
4. 复制静态资源

构建完成后，`dist/` 目录结构：

```
dist/
├── index.html                    # 首页
├── archives/
│   └── index.html               # 归档页
├── categories/
│   └── index.html               # 分类页
├── tags/
│   ├── index.html               # 标签页
│   └── javascript/              # 具体标签
│       └── index.html
├── 2024/
│   └── 11/
│       └── 17/
│           └── hello-world/
│               └── index.html   # 文章页
└── assets/
    └── css/
        └── style.css
```

---

## 部署到 GitHub Pages

### 方法一：GitHub Actions 自动部署（推荐）

#### 步骤 1：推送到 GitHub

```bash
# 添加所有文件
git add .

# 提交
git commit -m "更新博客"

# 推送
git push origin master
```

#### 步骤 2：配置 GitHub Pages

1. 打开 GitHub 仓库页面
2. 点击 **Settings** 标签
3. 左侧菜单找到 **Pages**
4. **Build and deployment** > **Source** 选择 **GitHub Actions**

#### 步骤 3：自动部署

- 每次推送代码到 `master` 分支
- GitHub Actions 会自动运行构建
- 几分钟后你的博客就会上线

#### 步骤 4：访问博客

```
https://你的用户名.github.io
```

### 方法二：手动部署

```bash
# 构建
npm run build

# 将 dist 目录内容推送到 gh-pages 分支
# 或使用其他部署工具
```

---

## 个性化配置

### 修改博客信息

编辑 `shiori.config.json`：

```json
{
  "site": {
    "title": "我的博客",              // 博客标题
    "subtitle": "记录技术成长",       // 副标题
    "description": "个人技术博客",    // 描述
    "author": "你的名字",            // 作者
    "language": "zh-CN",             // 语言
    "timezone": "Asia/Shanghai"      // 时区
  },
  "url": "https://你的用户名.github.io"
}
```

### 修改主题颜色

编辑 `shiori.config.json` 中的 `theme.colors`：

```json
{
  "theme": {
    "name": "minimalist",
    "colors": {
      "background": "#FAFAF9",      // 主背景色（米白色）
      "surface": "#FFFFFF",         // 内容背景色（白色）
      "text_primary": "#1C1917",    // 主文字色（深黑）
      "text_secondary": "#57534E",  // 次要文字色（灰色）
      "accent": "#292524",          // 强调色
      "border": "#E7E5E4",          // 边框颜色
      "code_bg": "#1C1917",         // 代码块背景
      "code_text": "#E7E5E4"        // 代码文字颜色
    }
  }
}
```

### 自定义样式

直接编辑 `themes/minimalist/assets/css/style.css` 文件。

例如，修改网站最大宽度：

```css
.container {
  max-width: 800px;  /* 改成你想要的宽度 */
}
```

### 修改文章 URL 格式

在 `shiori.config.json` 中修改 `permalink`：

```json
{
  "permalink": ":year/:month/:day/:title/"  // 2024/11/17/hello-world/
}
```

可用变量：
- `:year` - 年份（4位）
- `:month` - 月份（2位）
- `:day` - 日期（2位）
- `:title` - 文章标题（会转成小写和连字符）

其他格式示例：
```json
{
  "permalink": ":year/:title/"           // 2024/hello-world/
  "permalink": "posts/:title/"           // posts/hello-world/
  "permalink": ":category/:title/"       // tech/hello-world/
}
```

---

## 常见问题

### Q1: 修改配置后没有生效？

**解决方法**：
1. 确认 JSON 格式正确（注意逗号和引号）
2. 重新运行 `npm run build`
3. 清除浏览器缓存

### Q2: 文章没有显示在首页？

**检查**：
1. 确认文章在 `source/_posts/` 目录
2. 确认文件扩展名是 `.md`
3. 确认 YAML 头信息格式正确
4. 确认 `published` 没有设置为 `false`

### Q3: 代码块没有高亮？

**检查**：
```markdown
# 正确格式
\`\`\`javascript
console.log("Hello");
\`\`\`

# 错误格式（缺少语言标识）
\`\`\`
console.log("Hello");
\`\`\`
```

### Q4: 图片怎么添加？

**方法一：放到 assets 目录**

1. 将图片放到 `source/assets/images/`
2. 在文章中引用：
```markdown
![图片描述](/assets/images/photo.jpg)
```

**方法二：使用图床**

使用第三方图床服务（如 imgur、七牛云等），直接使用图片 URL。

### Q5: 如何添加自定义页面？

1. 在 `source/` 目录创建 Markdown 文件
2. 在导航栏添加链接（修改 `themes/minimalist/assets/css/style.css` 中的导航部分）

### Q6: GitHub Actions 部署失败？

**检查清单**：
1. 确认 `.github/workflows/deploy.yml` 文件存在
2. 确认仓库设置中 Pages 源选择了 "GitHub Actions"
3. 查看 Actions 标签页的错误日志
4. 确认 `package.json` 中的依赖已正确安装

### Q7: 想要导出之前的 Hexo 文章？

Shiori 兼容 Hexo 的文章格式，可以直接：
1. 复制 Hexo 的 `source/_posts/` 目录下的文件
2. 粘贴到 Shiori 的 `source/_posts/` 目录
3. 运行 `npm run build`

---

## 高级技巧

### 批量创建文章

创建一个脚本 `batch-posts.sh`：

```bash
#!/bin/bash
posts=("第一篇" "第二篇" "第三篇")
for post in "${posts[@]}"; do
  node cli.js new "$post"
done
```

### 添加 Google Analytics

在 `themes/minimalist/` 创建 `post.html` 模板，在 `</head>` 前添加：

```html
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_TRACKING_ID"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'GA_TRACKING_ID');
</script>
```

### 添加评论系统

集成 [Giscus](https://giscus.app/) 或其他评论系统，在主题模板中添加相关代码。

---

## 项目文件说明

| 文件/目录 | 说明 |
|-----------|------|
| `cli.js` | 命令行工具入口 |
| `shiori.config.json` | 全局配置文件 |
| `package.json` | 项目依赖配置 |
| `lib/` | 核心代码库 |
| `themes/minimalist/` | 默认主题文件 |
| `source/_posts/` | **你的文章放在这里** |
| `source/assets/` | 静态资源（图片等） |
| `dist/` | 生成的静态网站（构建后） |
| `.github/workflows/` | GitHub Actions 配置 |

---

## 获取帮助

遇到问题？

1. 查看 `README.md` 了解更多信息
2. 检查 `shiori.config.json` 配置
3. 查看浏览器控制台错误信息
4. 查看构建时的错误日志

---

## 快捷命令参考

```bash
# 创建新文章
node cli.js new "文章标题"

# 构建博客
npm run build

# 预览博客
npm run preview

# 开发模式（热重载）
npm run serve

# 清理构建
npm run clean

# 重新安装依赖
rm -rf node_modules package-lock.json
npm install
```

---

祝你用 Shiori 写出精彩的博客！
